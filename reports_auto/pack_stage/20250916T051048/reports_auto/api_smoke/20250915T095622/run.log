[*] API_RUN_DIR=/home/youjie/projects/smart-mail-agent-ssot-pro/reports_auto/api/20250915T095145
[OK] api_smoke_all å®Œæˆ
[?2004h(.venv) ]0;youjie@DESKTOP-MP3QVS6: ~/projects/smart-mail-agent-ssot-pro[01;32myoujie@DESKTOP-MP3QVS6[00m:[01;34m~/projects/smart-mail-agent-ssot-pro[00m$ [7mcd /home/youjie/projects/smart-mail-agent-ssot-pro[27m
[7mPORT=8000[27m

[7m# å…ˆåˆ—å‡º API ç›®å‰çš„è·¯å¾‘ï¼ˆæœƒå° RUN_DIR/LOG/ERR/PY_LASTï¼‰[27m
[7mscripts/api_where.sh[27m

[7m# é©—è­‰ ML è·¯ç”±[27m
[7mcurl -sS -X POST "http://127.0.0.1:${PORT}/classify" -H 'Content-Type: application/json' \[27m
[7m  -d '{"texts":["æƒ³è©¢å•å ±åƒ¹èˆ‡äº¤æœŸ","éœ€è¦æŠ€è¡“æ”¯æ´"], "route":"ml"}' | jq .[27m

[7m# è‹¥ä¸æ˜¯ 200ï¼Œç«‹å³æŠŠ Python traceback å°å‡ºä¾†ï¼ˆä¸€å®šæœ‰æª”æ¡ˆï¼‰[27m
[7mscripts/api_where.sh | sed -n 's/^PY_LAST=//p' | xargs -I{} sh -c 'echo "[PY_LAST] {}"; tail -n +1 "{}"'[27m

[7m# é©—è­‰ tri-evalï¼ˆrule/ml/openai ä¸‰è·¯ä¸€èµ·æ¯”ï¼‰[27m
[7mcurl -sS -X POST "http://127.0.0.1:${PORT}/tri-eval" -H 'Content-Type: application/json' \[27m
[7m  -d '{"texts":["æƒ³è©¢å•å ±åƒ¹èˆ‡äº¤æœŸ","éœ€è¦æŠ€è¡“æ”¯æ´","ç™¼ç¥¨æŠ¬é ­æ›´æ–°"],[27m
[7m       "labels":["biz_quote","tech_support","profile_update"]}' | jq .[27m
[A[A[A[A[A[A[A[A[A[A[A[A[A[A[A[A[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Ccd /home/youjie/projects/smart-mail-agent-ssot-pro
PORT=8000

# å…ˆåˆ—å‡º API ç›®å‰çš„è·¯å¾‘ï¼ˆæœƒå° RUN_DIR/LOG/ERR/PY_LASTï¼‰
scripts/api_where.sh

# é©—è­‰ ML è·¯ç”±
curl -sS -X POST "http://127.0.0.1:${PORT}/classify" -H 'Content-Type: application/json' \
  -d '{"texts":["æƒ³è©¢å•å ±åƒ¹èˆ‡äº¤æœŸ","éœ€è¦æŠ€è¡“æ”¯æ´"], "route":"ml"}' | jq .

# è‹¥ä¸æ˜¯ 200ï¼Œç«‹å³æŠŠ Python traceback å°å‡ºä¾†ï¼ˆä¸€å®šæœ‰æª”æ¡ˆï¼‰
scripts/api_where.sh | sed -n 's/^PY_LAST=//p' | xargs -I{} sh -c 'echo "[PY_LAST] {}"; tail -n +1 "{}"'

# é©—è­‰ tri-evalï¼ˆrule/ml/openai ä¸‰è·¯ä¸€èµ·æ¯”ï¼‰
curl -sS -X POST "http://127.0.0.1:${PORT}/tri-eval" -H 'Content-Type: application/json' \
  -d '{"texts":["æƒ³è©¢å•å ±åƒ¹èˆ‡äº¤æœŸ","éœ€è¦æŠ€è¡“æ”¯æ´","ç™¼ç¥¨æŠ¬é ­æ›´æ–°"],
       "labels":["biz_quote","tech_support","profile_update"]}' | jq .
[A
[?2004lRUN_DIR=/home/youjie/projects/smart-mail-agent-ssot-pro/reports_auto/api/20250915T095145
LOG=/home/youjie/projects/smart-mail-agent-ssot-pro/reports_auto/api/20250915T095145/run.log
ERR=/home/youjie/projects/smart-mail-agent-ssot-pro/reports_auto/api/20250915T095145/api.err
PY_LAST=/home/youjie/projects/smart-mail-agent-ssot-pro/reports_auto/api/20250915T095145/py_last_trace.txt
{
  "pred": [
    "biz_quote",
    "complaint"
  ],
  "latency_ms": 3,
  "route": "ml"
}
[PY_LAST] /home/youjie/projects/smart-mail-agent-ssot-pro/reports_auto/api/20250915T095145/py_last_trace.txt
tail: cannot open '/home/youjie/projects/smart-mail-agent-ssot-pro/reports_auto/api/20250915T095145/py_last_trace.txt' for reading: No such file or directory
[*] REPORT: /home/youjie/projects/smart-mail-agent-ssot-pro/reports_auto/api_smoke/20250915T095622
